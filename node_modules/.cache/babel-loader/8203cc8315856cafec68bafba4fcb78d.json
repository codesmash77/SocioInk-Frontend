{"ast":null,"code":"/* eslint-disable */import{SET_USER,SET_ERRORS,CLEAR_ERRORS,LOADING_UI,SET_UNAUTHENTICATED,LOADING_USER,MARK_NOTIFICATIONS_READ}from'../types';import axios from'axios';export var loginUser=function loginUser(userData,history){return function(dispatch){dispatch({type:LOADING_UI});axios.post('/login',userData).then(function(res){setAuthorizationHeader(res.data);dispatch(getUserData());dispatch({type:CLEAR_ERRORS});history.push('/');}).catch(function(err){dispatch({type:SET_ERRORS,payload:err.response.data});});};};export var signupUser=function signupUser(newUserData,history){return function(dispatch){dispatch({type:LOADING_UI});axios.post('/signup',newUserData).then(function(res){setAuthorizationHeader(res.data);dispatch(getUserData());dispatch({type:CLEAR_ERRORS});history.push('/login');}).catch(function(err){dispatch({type:SET_ERRORS,payload:err.response.data});});};};export var logoutUser=function logoutUser(){return function(dispatch){localStorage.removeItem('FBIdToken');delete axios.defaults.headers.common['Authorization'];dispatch({type:SET_UNAUTHENTICATED});};};export var getUserData=function getUserData(){return function(dispatch){dispatch({type:LOADING_USER});axios.get('/user').then(function(res){dispatch({type:SET_USER,payload:res.data});}).catch(function(err){return console.log(err);});};};export var uploadImage=function uploadImage(formData){return function(dispatch){dispatch({type:LOADING_USER});axios.post('/user/image',formData).then(function(){console.log(\"user image changed\");dispatch(getUserData());}).catch(function(err){return console.log(err);});};};export var editUserDetails=function editUserDetails(userDetails){return function(dispatch){dispatch({type:LOADING_USER});axios.post('/user',userDetails).then(function(){dispatch(getUserData());}).catch(function(err){return console.log(err);});};};export var markNotificationsRead=function markNotificationsRead(notificationIds){return function(dispatch){axios.post('/notifications',notificationIds).then(function(res){dispatch({type:MARK_NOTIFICATIONS_READ});}).catch(function(err){return console.log(err);});};};var setAuthorizationHeader=function setAuthorizationHeader(token){var FBIdToken=\"Bearer \".concat(token);localStorage.setItem('FBIdToken',FBIdToken);axios.defaults.headers.common['Authorization']=FBIdToken;};","map":{"version":3,"sources":["/mnt/c/Users/gokul/Desktop/React Lane/socialink-client/src/redux/actions/userActions.js"],"names":["SET_USER","SET_ERRORS","CLEAR_ERRORS","LOADING_UI","SET_UNAUTHENTICATED","LOADING_USER","MARK_NOTIFICATIONS_READ","axios","loginUser","userData","history","dispatch","type","post","then","res","setAuthorizationHeader","data","getUserData","push","catch","err","payload","response","signupUser","newUserData","logoutUser","localStorage","removeItem","defaults","headers","common","get","console","log","uploadImage","formData","editUserDetails","userDetails","markNotificationsRead","notificationIds","token","FBIdToken","setItem"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport {\n\tSET_USER,\n\tSET_ERRORS,\n\tCLEAR_ERRORS,\n\tLOADING_UI,\n\tSET_UNAUTHENTICATED,\n\tLOADING_USER,\n\tMARK_NOTIFICATIONS_READ\n} from '../types';\n\nimport axios from 'axios';\n\nexport const loginUser = (userData, history) => (dispatch) => {\n\tdispatch({ type: LOADING_UI });\n\taxios\n\t\t.post('/login', userData)\n\t\t.then((res) => {\n\t\t\tsetAuthorizationHeader(res.data);\n\t\t\tdispatch(getUserData());\n\t\t\tdispatch({ type: CLEAR_ERRORS });\n\t\t\thistory.push('/');\n\t\t})\n\t\t.catch((err) => {\n\t\t\tdispatch({\n\t\t\t\ttype: SET_ERRORS,\n\t\t\t\tpayload: err.response.data\n\t\t\t});\n\t\t});\n};\n\nexport const signupUser = (newUserData, history) => (dispatch) => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post('/signup', newUserData)\n    .then((res) => {\n      setAuthorizationHeader(res.data);\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      history.push('/login');\n    })\n    .catch((err) => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    });\n};\n\nexport const logoutUser = () => (dispatch) => {\n  localStorage.removeItem('FBIdToken');\n  delete axios.defaults.headers.common['Authorization'];\n  dispatch({ type: SET_UNAUTHENTICATED });\n};\n\nexport const getUserData = () => (dispatch) => {\n\tdispatch({ type: LOADING_USER });\n\taxios\n\t\t.get('/user')\n\t\t.then((res) => {\n\t\t\tdispatch({\n\t\t\t\ttype: SET_USER,\n\t\t\t\tpayload: res.data\n\t\t\t});\n\t\t})\n\t\t.catch((err) => console.log(err));\n};\n\nexport const uploadImage = (formData) => (dispatch) => {\n  dispatch({ type: LOADING_USER });\n  axios\n    .post('/user/image', formData)\n    .then(() => {\n      console.log(\"user image changed\")\n      dispatch(getUserData());\n    })\n    .catch((err) => console.log(err));\n};\n\n\nexport const editUserDetails = (userDetails) => (dispatch) => {\n  dispatch({ type: LOADING_USER });\n  axios\n    .post('/user', userDetails)\n    .then(() => {\n      dispatch(getUserData());\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const markNotificationsRead = (notificationIds) => (dispatch) => {\n  axios\n    .post('/notifications', notificationIds)\n    .then((res) => {\n      dispatch({\n        type: MARK_NOTIFICATIONS_READ\n      });\n    })\n    .catch((err) => console.log(err));\n};\n\n\nconst setAuthorizationHeader = (token) => {\n\tconst FBIdToken = `Bearer ${token}`;\n\tlocalStorage.setItem('FBIdToken', FBIdToken);\n\taxios.defaults.headers.common['Authorization'] = FBIdToken;\n};\n"]},"metadata":{},"sourceType":"module"}