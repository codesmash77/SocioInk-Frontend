{"ast":null,"code":"import _classCallCheck from\"/mnt/c/Users/gokul/Desktop/React Lane/socialink-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/c/Users/gokul/Desktop/React Lane/socialink-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/mnt/c/Users/gokul/Desktop/React Lane/socialink-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/mnt/c/Users/gokul/Desktop/React Lane/socialink-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import MyButton from'../util/MyButton';import LikeButton from'./LikeButton';import Comments from'./Comments';import CommentForm from'./CommentForm';import dayjs from'dayjs';import{Link}from'react-router-dom';// MUI Stuff\nimport Dialog from'@material-ui/core/Dialog';import DialogContent from'@material-ui/core/DialogContent';import CircularProgress from'@material-ui/core/CircularProgress';import Grid from'@material-ui/core/Grid';import Typography from'@material-ui/core/Typography';// Icons\nimport CloseIcon from'@material-ui/icons/Close';import UnfoldMore from'@material-ui/icons/UnfoldMore';import ChatIcon from'@material-ui/icons/Chat';// Redux stuff\nimport{connect}from'react-redux';import{getInk,clearErrors}from'../redux/actions/dataActions';import'../components/Ink.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InkDialog=/*#__PURE__*/function(_Component){_inherits(InkDialog,_Component);var _super=_createSuper(InkDialog);function InkDialog(){var _this;_classCallCheck(this,InkDialog);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={open:false,oldPath:'',newPath:''};_this.handleOpen=function(){var oldPath=window.location.pathname;var _this$props=_this.props,userHandle=_this$props.userHandle,inkId=_this$props.inkId;var newPath=\"/users/\".concat(userHandle,\"/ink/\").concat(inkId);if(oldPath===newPath)oldPath=\"/users/\".concat(userHandle);window.history.pushState(null,null,newPath);_this.setState({open:true,oldPath:oldPath,newPath:newPath});_this.props.getInk(_this.props.inkId);};_this.handleClose=function(){window.history.pushState(null,null,_this.state.oldPath);_this.setState({open:false});_this.props.clearErrors();};return _this;}_createClass(InkDialog,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.openDialog){this.handleOpen();}}},{key:\"render\",value:function render(){var _this$props2=this.props,_this$props2$ink=_this$props2.ink,inkId=_this$props2$ink.inkId,body=_this$props2$ink.body,createdAt=_this$props2$ink.createdAt,likeCount=_this$props2$ink.likeCount,commentCount=_this$props2$ink.commentCount,userImage=_this$props2$ink.userImage,userHandle=_this$props2$ink.userHandle,comments=_this$props2$ink.comments,loading=_this$props2.UI.loading;var dialogMarkup=loading?/*#__PURE__*/_jsx(\"div\",{className:\"spinnerDiv\",children:/*#__PURE__*/_jsx(CircularProgress,{size:200,thickness:2})}):/*#__PURE__*/_jsxs(Grid,{container:true,spacing:16,children:[/*#__PURE__*/_jsx(Grid,{item:true,sm:5,children:/*#__PURE__*/_jsx(\"img\",{src:userImage,alt:\"Profile\",className:\"profileimage\"})}),/*#__PURE__*/_jsxs(Grid,{item:true,sm:7,children:[/*#__PURE__*/_jsxs(Typography,{component:Link,color:\"primary\",variant:\"h5\",to:\"/users/\".concat(userHandle),children:[\"@\",userHandle]}),/*#__PURE__*/_jsx(\"hr\",{className:\"invisibleseparator\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:dayjs(createdAt).format('h:mm a, MMMM DD YYYY')}),/*#__PURE__*/_jsx(\"hr\",{className:\"invisibleseparator\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:body}),/*#__PURE__*/_jsx(LikeButton,{inkId:inkId}),/*#__PURE__*/_jsxs(\"span\",{children:[likeCount,\" likes\"]}),/*#__PURE__*/_jsx(MyButton,{tip:\"comments\",children:/*#__PURE__*/_jsx(ChatIcon,{color:\"primary\"})}),/*#__PURE__*/_jsxs(\"span\",{children:[commentCount,\" comments\"]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"invisibleseparator\"}),/*#__PURE__*/_jsx(CommentForm,{inkId:inkId}),/*#__PURE__*/_jsx(Comments,{comments:comments})]});return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MyButton,{onClick:this.handleOpen,tip:\"Expand scream\",tipClassName:\"expandButton\",children:/*#__PURE__*/_jsx(UnfoldMore,{color:\"primary\"})}),/*#__PURE__*/_jsxs(Dialog,{open:this.state.open,onClose:this.handleClose,fullWidth:true,maxWidth:\"sm\",children:[/*#__PURE__*/_jsx(MyButton,{tip:\"Close\",onClick:this.handleClose,tipClassName:\"closeButton\",children:/*#__PURE__*/_jsx(CloseIcon,{})}),/*#__PURE__*/_jsx(DialogContent,{className:\"dialogContent\",children:dialogMarkup})]})]});}}]);return InkDialog;}(Component);var mapStateToProps=function mapStateToProps(state){return{ink:state.data.ink,UI:state.UI};};var mapActionsToProps={getInk:getInk,clearErrors:clearErrors};export default connect(mapStateToProps,mapActionsToProps)(InkDialog);","map":{"version":3,"sources":["/mnt/c/Users/gokul/Desktop/React Lane/socialink-client/src/Inks/InkDialog.js"],"names":["React","Component","Fragment","MyButton","LikeButton","Comments","CommentForm","dayjs","Link","Dialog","DialogContent","CircularProgress","Grid","Typography","CloseIcon","UnfoldMore","ChatIcon","connect","getInk","clearErrors","InkDialog","state","open","oldPath","newPath","handleOpen","window","location","pathname","props","userHandle","inkId","history","pushState","setState","handleClose","openDialog","ink","body","createdAt","likeCount","commentCount","userImage","comments","loading","UI","dialogMarkup","format","mapStateToProps","data","mapActionsToProps"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MyButton from '../util/MyButton';\nimport LikeButton from './LikeButton';\nimport Comments from './Comments';\nimport CommentForm from './CommentForm';\nimport dayjs from 'dayjs';\nimport { Link } from 'react-router-dom';\n// MUI Stuff\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n// Icons\nimport CloseIcon from '@material-ui/icons/Close';\nimport UnfoldMore from '@material-ui/icons/UnfoldMore';\nimport ChatIcon from '@material-ui/icons/Chat';\n// Redux stuff\nimport { connect } from 'react-redux';\nimport { getInk, clearErrors } from '../redux/actions/dataActions';\nimport '../components/Ink.css';\n\n\nclass InkDialog extends Component {\n  state = {\n    open: false,\n    oldPath: '',\n    newPath: ''\n  };\n  componentDidMount() {\n    if (this.props.openDialog) {\n      this.handleOpen();\n    }\n  }\n  handleOpen = () => {\n    let oldPath = window.location.pathname;\n\n    const { userHandle, inkId } = this.props;\n    const newPath = `/users/${userHandle}/ink/${inkId}`;\n\n    if (oldPath === newPath) oldPath = `/users/${userHandle}`;\n\n    window.history.pushState(null, null, newPath);\n\n    this.setState({ open: true, oldPath, newPath });\n    this.props.getInk(this.props.inkId);\n  };\n  handleClose = () => {\n    window.history.pushState(null, null, this.state.oldPath);\n    this.setState({ open: false });\n    this.props.clearErrors();\n  };\n\n  render() {\n    const {\n      ink: {\n        inkId,\n        body,\n        createdAt,\n        likeCount,\n        commentCount,\n        userImage,\n        userHandle,\n        comments\n      },\n      UI: { loading }\n    } = this.props;\n\n    const dialogMarkup = loading ? (\n      <div className=\"spinnerDiv\">\n        <CircularProgress size={200} thickness={2} />\n      </div>\n    ) : (\n      <Grid container spacing={16}>\n        <Grid item sm={5}>\n          <img src={userImage} alt=\"Profile\" className=\"profileimage\" />\n        </Grid>\n        <Grid item sm={7}>\n          <Typography\n            component={Link}\n            color=\"primary\"\n            variant=\"h5\"\n            to={`/users/${userHandle}`}\n          >\n            @{userHandle}\n          </Typography>\n          <hr className=\"invisibleseparator\" />\n          <Typography variant=\"body2\" color=\"textSecondary\">\n            {dayjs(createdAt).format('h:mm a, MMMM DD YYYY')}\n          </Typography>\n          <hr className=\"invisibleseparator\" />\n          <Typography variant=\"body1\">{body}</Typography>\n          <LikeButton inkId={inkId} />\n          <span>{likeCount} likes</span>\n          <MyButton tip=\"comments\">\n            <ChatIcon color=\"primary\" />\n          </MyButton>\n          <span>{commentCount} comments</span>\n        </Grid>\n        <hr className=\"invisibleseparator\" />\n        <CommentForm inkId={inkId} />\n        <Comments comments={comments} />\n      </Grid>\n    );\n    return (\n      <Fragment>\n        <MyButton\n          onClick={this.handleOpen}\n          tip=\"Expand scream\"\n          tipClassName=\"expandButton\"\n        >\n          <UnfoldMore color=\"primary\" />\n        </MyButton>\n        <Dialog\n          open={this.state.open}\n          onClose={this.handleClose}\n          fullWidth\n          maxWidth=\"sm\"\n        >\n          <MyButton\n            tip=\"Close\"\n            onClick={this.handleClose}\n            tipClassName=\"closeButton\"\n          >\n            <CloseIcon />\n          </MyButton>\n          <DialogContent className=\"dialogContent\">\n            {dialogMarkup}\n          </DialogContent>\n        </Dialog>\n      </Fragment>\n    );\n  }\n}\n\nInkDialog.propTypes = {\n  clearErrors: PropTypes.func.isRequired,\n  getInk: PropTypes.func.isRequired,\n  inkId: PropTypes.string.isRequired,\n  userHandle: PropTypes.string.isRequired,\n  ink: PropTypes.object.isRequired,\n  UI: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) => ({\n  ink: state.data.ink,\n  UI: state.UI\n});\n\nconst mapActionsToProps = {\n  getInk,\n  clearErrors\n};\n\nexport default connect(\n  mapStateToProps,\n  mapActionsToProps\n)(InkDialog);"]},"metadata":{},"sourceType":"module"}